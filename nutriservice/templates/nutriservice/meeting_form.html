{% extends "nutriservice/template_form.html" %}

{% block links %}
  <link rel="stylesheet" href="https://unpkg.com/@fullcalendar/core/main.min.css">
  <link rel="stylesheet" href="https://unpkg.com/@fullcalendar/daygrid/main.min.css">
  <link rel="stylesheet" href="https://unpkg.com/@fullcalendar/timegrid/main.min.css">
{% endblock %}

{% block navbar %}
  <div id="spinner" class="spinner-border mr-3 text-success" role="status">
    <span class="sr-only">Loading...</span>
  </div>
  <button id="authorize_button" class="btn btn-warning my-0 mr-5 float-right">
    <i class="fab fa-google"></i>
    <span>&nbsp;&nbsp;Autorizar conta Google</span>
  </button>
  <button id="signout_button" class="btn btn-secondary my-0 mr-5 float-right" style="display: none;">
    <i class="fas fa-sign-out-alt"></i>
    <span>&nbsp;&nbsp;Alterar conta Google</span>
  </button>
  {{ block.super }}
{% endblock %}

{% block content %}
  <form id="form" action="" method="post" class="mb-3">
    {% csrf_token %}
    {% block form %}{{ block.super }}{% endblock %}
  </form>
  <div id="calendar"></div>
{% endblock %}

{% block scripts %}
  <script src="https://unpkg.com/@fullcalendar/core/main.min.js"></script>
  <script src="https://unpkg.com/@fullcalendar/interaction/main.min.js"></script>
  <script src="https://unpkg.com/@fullcalendar/daygrid/main.min.js"></script>
  <script src="https://unpkg.com/@fullcalendar/timegrid/main.min.js"></script>
  <script src="https://unpkg.com/@fullcalendar/google-calendar/main.min.js"></script>
  {% load static %}
  <script src="{% static 'js/calendar.js' %}"></script>
  <script async defer src="https://apis.google.com/js/api.js"
    onload="this.onload=function(){};handleClientLoad()"
    onreadystatechange="if (this.readyState === 'complete') this.onload()">
  </script>
{% endblock %}